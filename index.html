<html>
<head>
  <!-- Note: Probably not the way 'bower' dependencies are supposed to be used, but works for us.
  -->
  <script src="bower_components/svg.js/dist/svg.js" type="text/javascript"></script>
  <script src="bower_components/svg.draggable.js/dist/svg.draggable.js" type="text/javascript"></script>
  
  <!--
  <script src="lib/svg.draggy.js-1.1.0/src/svg.draggy.js"></script>
  -->
  
  <style>
    rect.main { 
      fill: blue;
      fill-opacity: 0.8;
    }
    rect.corner { 
      fill: yellow;
      fill-opacity: 0.5;
    }
    rect { 
      fill: purple;
    }
  </style>
</head>

<!-- Make a rectangle with corners as separate rectangles, so that everything
- follows each other (i.e. corners resize the big rect, panning bit rect moves
- also the corners).
-->
<body>
  <div id="cradle">
  </div>
  
  <script>
    var W= 100;
    var CORNER_SIZE = 20;
    var CORNER_OFFSET = 5;
    
    var svg = SVG("cradle");   // fills the cradle fully

    var g = svg.group();

    // beforedrag
    // dragstart
    // dragmove
    // dragend

    var ne=null,
      se=null,
      sw=null,
      nw=null;

    // Do four corners (note: the corner's (0,0) will be where the main box's particular corner tracks them).
    //
    // - use 'move()' to change the 'x,y'
    // - use 'translate()' to position the origin
    //
    for( var i=0; i<4; i++ ) {    // ne,se,sw,nw
      var dx = (i<2) ? W-CORNER_SIZE : 0;
      var dy = (i==1 || i==2) ? W-CORNER_SIZE : 0;
      var tx = (i<2) ? CORNER_OFFSET : -CORNER_OFFSET;
      var ty = (i==1 || i==2) ? CORNER_OFFSET : -CORNER_OFFSET;
    
      var corner = g.rect(CORNER_SIZE,CORNER_SIZE)
                    .translate( tx,ty )
                    .move( dx,dy )
                    .addClass("corner").draggable();
                    
      if (i==0) {
        ne= corner;
      } else if (i==1) {
        se = corner;
      } else if (i==2) {
        sw = corner;
      } else {
        nw = corner;
      }
    }

    // Now, bind here 'ne' 'x' to 'se' x' and 'ne' y to 'nw' y
    //
    //...
    
    /***
    // Main rect, bound to the corners dynamically
    //
    g.rect(W,W) /_*.bind(se)*_/ .addClass("main").draggable().on("dragmove.namespace", function(ev) {
      console.log(ev);
    } );  
    ***/
    
    g.move(50,50); //.draggable();
    
  </script>
</body>
</html>
